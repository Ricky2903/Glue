<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	lang="#{languageBean.language}">
<f:view locale="#{languageBean.locale}" />
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Glue</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<!-- Bootstrap -->
	<h:outputStylesheet library="css" name="bootstrap.min.css"
		media="screen" />
	<h:outputStylesheet library="css" name="typeahead.js-bootstrap.css"
		media="screen" />
	<h:outputStylesheet library="css" name="glue.css" media="screen" />
	<h:outputStylesheet library="css" name="font-awesome.min.css"
		media="screen" />

	<script type="text/javascript"
		src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;sensor=false&amp;libraries=places"></script>
	<h:outputScript library="js" name="geolocation.js" />
	<script type="text/javascript">
		/* <![CDATA[ */
	  	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	 	 })(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

		__gaTracker('create', 'UA-45640046-1', '54.218.127.196:8080');
		__gaTracker('send', 'pageview');
		/* ]]> */
	</script>

</h:head>
<h:body>

	<div id="fb-root"></div>
	<script>
		(function(d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id))
				return;
			js = d.createElement(s);
			js.id = id;
			js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
			fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));
	</script>

	<div id="glue-feedback">
		<a class="btn btn-danger" data-toggle="modal"
			data-controls-modal="feedback" data-backdrop="static"
			data-keyboard="false" href="#feedback">Feedback</a>
	</div>

	<nav class="navbar navbar-default navbar-fixed-top glue-navbar-default"
		role="navigation">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse"
				data-target=".navbar-ex1-collapse">
				<span class="sr-only">Toggle navigation</span><span
					class="icon-bar"></span> <span class="icon-bar"></span> <span
					class="icon-bar"></span>
			</button>

			<h:link class="navbar-brand glue-brand" outcome="main">
				<span><span class="text-success">g</span><span
					class="text-muted">l</span><span class="text-muted">u</span><span
					class="text-muted">e</span></span>
			</h:link>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse navbar-ex1-collapse">

			<div class="col-sm-4">
			<h:form id="main_form" styleClass="navbar-form navbar-left" role="search">
					<div class="input-group">
					<!-- input-sm -->
					<h:inputText styleClass="typeahead form-control"
						p:placeholder="#{bundle.search}"
						value="#{streamSearchBean.query}" />
					<h:commandLink id="main_input" action="#{streamSearchBean.search}"
						styleClass="input-group-addon">
							<span class="glyphicon glyphicon-search text-muted"></span>
					</h:commandLink>
				</div>
				<h:commandButton action="#{streamSearchBean.search}"
					style="display:none;" />
			</h:form>
			</div>

			<ul class="nav navbar-nav navbar-left">
				<li id="location" class="navbar-text"></li>
			</ul>

			<h:form>
				<ul class="nav navbar-nav navbar-right">
					<c:choose>
						<c:when test="${!empty request.remoteUser}">
							<!-- <li><h:link outcome="/stream/create"
									title="#{bundle.create_stream}">
									<span class="glyphicon glyphicon-plus-sign"></span>
								</h:link></li>
							<li><a href="#"><span class="badge">42</span></a></li> -->
							<li class="dropdown"><a class="dropdown-toggle"
								data-toggle="dropdown" href="#"> #{request.remoteUser} <span
									class="caret"></span>
							</a>
								<ul class="dropdown-menu">
									<li><a href="#"><span class="glyphicon glyphicon-cog"></span>&nbsp;<h:outputText
												value="#{bundle.account_settings}" /></a></li>
									<li><a href="#"><span
											class="glyphicon glyphicon-filter"></span>&nbsp;<h:outputText
												value="#{bundle.search_filters}" /></a></li>
									<li><h:commandLink action="#{loginBean.logout}">
											<span class="glyphicon glyphicon-log-out"></span>&nbsp;<h:outputText
												value="#{bundle.logout}" />
										</h:commandLink></li>
								</ul></li>
						</c:when>
						<c:otherwise>
							<li><h:link value="#{bundle.sign_in}" outcome="login" /></li>
							<li><h:link value="#{bundle.sign_up}" outcome="register" /></li>
						</c:otherwise>
					</c:choose>
				</ul>
			</h:form>
		</div>

		<!--/.nav-collapse -->
	</div>
	</nav>
	
	<!-- Feedback modal window -->
	<div id="feedback" class="modal fade in" tabindex="-1" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<h:form id="feedback-form" class="form-horizontal">
					<div class="modal-header">
						<h4 class="modal-title">
							<h:outputText value="#{bundle.feedback_title}"></h:outputText>
						</h4>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label class="col-lg-2 control-label" for="feedback-subject">
								<h:outputText value="#{bundle.feedback_subject}"></h:outputText>
							</label>
							<div class="col-lg-10">
								<h:inputText id="feedback-subject" styleClass="form-control"
									value="#{feedbackBean.subject}"
									p:placeholder="Bug, remark, new idea ..." />
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-2 control-label" for="feedback-mail">
								<h:outputText value="#{bundle.feedback_mail}"></h:outputText>
							</label>
							<div class="col-lg-10">
								<h:inputText id="feedback-mail" styleClass="form-control"
									value="#{feedbackBean.mailAddress}"
									p:placeholder="you@exemple.com"
									validatorMessage="#{bundle.feedback_mail_error}">
									<f:validateRegex pattern="(.+@.+\.[a-zA-Z]+)?" />
									<f:ajax event="valueChange" render="feedback-mail-msg" />
								</h:inputText>
								<h:message id="feedback-mail-msg" for="feedback-mail"
									style="color: red" />
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-2 control-label" for="feedback-message">
								<h:outputText value="#{bundle.feedback_message}"></h:outputText>
							</label>
							<div class="col-lg-10">
									<h:inputTextarea id="feedback-message"
										styleClass="form-control" value="#{feedbackBean.message}"
										rows="8" />
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<a class="btn btn-default" data-dismiss="modal"> <h:outputText
								value="#{bundle.feedback_close}"></h:outputText>
						</a>
						<h:commandButton styleClass="btn btn-primary hidefeedback"
							value="#{bundle.feedback_send}" action="#{feedbackBean.send}">
							<f:ajax execute="@form" />
						</h:commandButton>
					</div>
				</h:form>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal-dialog -->
	</div>
	<!-- /.modal -->

	<div id="content" class="container">
		<div id="glue-wrap">
			<ui:insert name="content">Main Content</ui:insert>
		</div>

		<ui:insert name="footer">
			<ui:include src="default-footer.xhtml" />
		</ui:insert>

	</div>
	<!-- /container -->

	<!-- <h:outputScript library="js" name="jquery.js" /> -->
	<h:outputScript library="primefaces" name="jquery/jquery.js" />
	<h:outputScript library="js" name="bootstrap.min.js" />
	<h:outputScript library="js" name="hogan.js" />
	<h:outputScript library="js" name="typeahead.js" />
	<h:outputScript library="js" name="glue.js" />

	<h:outputScript>
	$('input').popover({trigger: 'focus'});
	$('.glue-info-badge').popover({trigger: 'hover'});
    </h:outputScript>
	<h:outputScript>
		$(document).ready(function(){
		$('.carousel').carousel({interval: 15000});
		});
	</h:outputScript>
	<h:outputScript>
		$('.hidefeedback').click(function(e){
   		 	e.preventDefault();
    		$('.modal').modal('hide');
    		return false;
		});
	</h:outputScript>

	<ui:insert name="javascript"></ui:insert>

</h:body>
</html>
