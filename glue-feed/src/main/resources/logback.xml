<?xml version="1.0" encoding="UTF-8"?>
<configuration>

	<!-- Console appender -->
	<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
		<encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
			<pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
			</pattern>
		</encoder>
	</appender>

	<!--Daily rolling file appender -->
	<appender name="FILE"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		<File>logs/glue-feed.log</File>
		<!-- The rollover period is inferred from the value of fileNamePattern -->
		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<FileNamePattern>logs/glue-feed.%d{yyyy-MM-dd}.log</FileNamePattern>
			<!-- 1 month history rollover -->
			<maxHistory>30</maxHistory>
			<!-- If glue-feed do not live long enough for roll over to be triggered -->
			<cleanHistoryOnStart>true</cleanHistoryOnStart>
		</rollingPolicy>

		<filter class="ch.qos.logback.classic.filter.ThresholdFilter">
			<level>INFO</level>
		</filter>

		<encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
			<pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
			</pattern>
		</encoder>
	</appender>

	<appender name="EMAIL" class="ch.qos.logback.classic.net.SMTPAppender">

		<!-- Configure SMTPAppender for Gmail with the SSL protocol. -->
		<smtpHost>smtp.gmail.com</smtpHost>
		<smtpPort>465</smtpPort>
		<SSL>true</SSL>
		<username>glue.contact@gmail.com</username>
		<!-- The value for the password property is determined by variable substitution. 
			You can pass the required parameter on the command line: java -Dgmail.password=... -->
		<!-- <password>${gmail.password}</password> -->
		<password>pascal&amp;greg</password>
		<!-- For testing purposes only -->
		<!-- <asynchronousSending>false</asynchronousSending> -->

		<from>glue.contact@gmail.com</from>
		<to>glue.contact@gmail.com</to>
		<!-- <to>pascalgillet@ymail.com</to> --> <!-- additional destinations are possible -->
		<subject>[glue-feed] Something went wrong: %logger{20} - %m</subject>

		<layout class="ch.qos.logback.classic.PatternLayout">
			<pattern>%date [%thread] %-5level %logger{36} - %msg%n</pattern>
		</layout>

		<!-- <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"> 
			<pattern>%date [%thread] %-5level %logger{36} - %msg%n</pattern> </encoder> -->
	</appender>

	<logger name="com.glue" level="DEBUG" />
	<logger name="org.quartz" level="DEBUG" />


	<root level="DEBUG">
		<appender-ref ref="STDOUT" />
		<!-- TODO -->
		<!-- <if condition='property("env").contains("production")'> <then> -->
		<!-- For now, you can just comment the following lines to disable the appenders 
			in your development environment -->
		<appender-ref ref="FILE" />
		<appender-ref ref="EMAIL" />
		<!-- </then> </if> -->
	</root>
</configuration>